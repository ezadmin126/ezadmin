<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title th:text="${form.core.form_name}">formName</title>

    <link th:href="${contextName+'/webjars/topezadmin/layui/css/ezform.css?v='+vi}" rel="stylesheet">
    <link th:href="${contextName+'/webjars/layuidist/css/layui.css?v='+vi}" rel="stylesheet">
    <link th:href="${contextName+'/webjars/topezadmin/plugins/cascader/cascader.css'}" rel="stylesheet">

    <script th:src="${contextName+'/webjars/jquery/1.12.4/jquery.min.js'}"></script>
    <script th:src="${contextName+'/webjars/topezadmin/layui/js/jquery.cookie.js'}"></script>

    <script th:src="${contextName+'/webjars/layuidist/layui.js?v='+vi}" type="text/javascript"></script>

    <script th:src="${contextName+'/webjars/topezadmin/plugins/cascader/cascader.js'}" type="text/javascript"></script>
    <script th:src="${contextName+'/webjars/topezadmin/plugins/cascader/xm-select.js'}" type="text/javascript"></script>

    <script th:src="${contextName+'/webjars/topezadmin/layui/js/core.js?v='+vi}" type="text/javascript"></script>
    <script th:src="${contextName+'/webjars/topezadmin/layui/js/py.js?v='+vi}" type="text/javascript"></script>
    <script th:src="${contextName+'/webjars/jqueryform/jquery.form.js?'}"></script>
    <script th:src="${contextName+'/webjars/jquery-validation/1.19.5/jquery.validate.js'}"></script>
    <script th:src="${contextName+'/webjars/jquery-validation/1.19.5/additional-methods.min.js'}"></script>

    <script th:src="${contextName+'/webjars/jquery-validation/1.19.5/localization/messages_zh.min.js'}"></script>
    <script type='text/javascript' th:src="${contextName+'/webjars/topezadmin/plugins/dragula/dragula.min.js'}"></script>
    <script th:src="${contextName+'/webjars/tinymce/5.10.7/tinymce.min.js'}" type="text/javascript"></script>
    <link id="layui_theme_css"  rel="stylesheet" th:href="${darkTheme eq 'dark'?'/webjars/topezadmin/layui/css/layui-theme-dark.css?123'+vi:''}"  >

</head>
<body th:utext="${form.core.bodyTag}" th:remove="tag"> </body>
[(${form.core.append_head})]
    <form ID="inputForm" method="post" style="padding-bottom: 60px"  class="layui-form"  lay-filter="inputForm" >

    <div th:class="${'layui-'+layout}">
        <div class="layui-tab layui-tab-brief" lay-filter="docDemoTabBrief">

            <div class="layui-tab-content">
                <div class="layui-tab-item layui-show">

    <!--                <blockquote  class="layui-elem-quote layui-quote-nm"-->
    <!--                            th:text="${form.core.form_name}">这个-->
    <!--                </blockquote>-->

                         <input type="hidden" ID="ID" name="ID" th:VALUE="${ID}">
                        <input type="hidden" id="FORM_ID" name="FORM_ID" th:VALUE="${form.core.formcode}">
                    <input type="hidden" ID="EZ_SESSION_USER_NAME_KEY" name="EZ_SESSION_USER_NAME_KEY"
                           th:value="${EZ_SESSION_USER_NAME_KEY}">
                    <input type="hidden" ID="EZ_SESSION_USER_ID_KEY" name="EZ_SESSION_USER_ID_KEY" th:value="${EZ_SESSION_USER_ID_KEY}">
                    <input type="hidden" ID="_EZ_SERVER_NAME" name="_EZ_SERVER_NAME" th:value="${_EZ_SERVER_NAME}">

                        <div class="layui-col-space10 layui-row ">
                            <div th:classappend="${'layui-col-md'+card.col}" th:each="card:${form.cards}">
                                <div class="layui-card"  >
                                    <div class="layui-card-header ez-form-panel" th:ID="${card.cardname}"
                                         th:if="${not #strings.isEmpty(card.cardname) and card.cardname!='EZ_DEFAULT_GROUP' }">
                                         [[${card.cardname}]]
                                        <div class="layui-layer-setwin  " style="top: 0px;line-height: 43px;position: absolute;">
                                            <div class="layui-btn-group custom-card-btn">
                                            <button  th:if="${not #strings.isEmpty(card.btnname)}" class="ezopenbutton layui-btn layui-btn-sm layui-btn-normal"
                                                  th:windowname="${card.btnname}"
                                                  th:url="${card.btnurl}" th:opentype="${card.btnopentype}" th:text="${card.btnname}">添加</button>
                                                [(${card.btntemplate})]
                                            </div>
                                                <span class="layui-layer-min" style=" "></span>
                                            <span class="layui-layer-max layui-layer-maxmin layui-hide"  ></span>
                                        </div>
                                    </div>
                                    <div class="layui-card-body  layui-anim " th:style="${#lists.isEmpty(card.items)?'padding:1px;line-height: 0px;':''}">
                                        <div class="layui-row  " th:if="${not #lists.isEmpty(card.items)}">
                                            <div   th:each="item,stat:${card.items}" th:remove="tag" th:utext="${item.html}">
                                            </div>
                                        </div>
                                        <div class="layui-row  " th:if="${  #lists.isEmpty(card.items)}">
                                            <iframe th:src="${card.frameurl}"
                                                    width="100%" th:height="${card.frameheight+'px'}" frameborder="no" border="0" marginwidth="0" marginheight="0"></iframe>
                                        </div>
                                    </div>
                                </div>
                            </div>
<!--                            <div class="layui-col-md12">-->
<!--                            <div class="layui-form-item">-->
<!--                                <div class="layui-input-block" id="submitButtonContainer">-->

<!--                                   -->
<!--    &lt;!&ndash;                                <button type="reset" class="layui-btn layui-btn-primary">重置</button>&ndash;&gt;-->
<!--                                </div>-->
<!--                            </div>-->
                        </div>
                        </div>

                </div>
            </div><!--end layui-tab-content-->
        </div>
    </div>
        <button id="submitbtn"  type="submit" class="layui-btn layui-bg-blue layui-hide " lay-submit
                lay-filter="submitbtn">提交
        </button>
</form>
<!-- <div class="layui-panel  formtopfix formtopfixbottom" style="height:58px">-->
<!-- </div>-->
<!--<div class="layuimini-loader"  >-->
<!--    <div class="layuimini-loader-inner"></div>-->
<!--</div>-->
<div class="layui-panel formtopfix formtopfixbuttons"  >
    <div style="margin: 10px 0px 0px 10px;" class="layui-btn-container" id="submitButtonContainer">
        <button id="submitbtnProxy"  class="layui-btn layui-bg-blue "
                lay-filter="submitbtn">提交
        </button>
        <button th:if="${not cacheFlag}" opentype="_BLANK" type="button" th:url="${'/topezadmin/formEdit/loadEdit-'+form.core.formcode}"  class="ezopenbutton layui-btn    layui-btn-primary layui-btn-sm ">
            图形编辑
        </button>
        <button th:if="${not cacheFlag}" opentype="_BLANK" type="button" th:url="${'/topezadmin/formEdit/sourceEdit-'+form.core.formcode}"  class="ezopenbutton layui-btn    layui-btn-primary layui-btn-sm ">
            源码编辑
        </button>
        <button th:if="${not cacheFlag}" opentype="_BLANK_PARAM" type="button" th:url="${'/topezadmin/formEdit/trace-'+form.core.formcode}"  class="ezopenbutton layui-btn    layui-btn-primary layui-btn-sm ">
            查看SQL
        </button>
    </div>
</div>
<script>
    layui.layer.open({
        type: 1,
        offset: 'b',
        title: false, // 不显示标题栏
        closeBtn: 0,
        anim: 'slideUp', // 从下往上
        area: ['100%', '60px'],
        shade: 0,
        skin:'submitButtonContainerClass',
        shadeClose: false,
        id: 'ID-submitButtonContainer',
        content: $("#submitButtonContainer")
    });
</script>

<div>
    <style >

        /* 目录 */
        .site-dir {
            display: none;width:10px
        }
        .site-dir:hover {
            display: block;width:auto;
        }

        .site-dir li {
            line-height: 26px;
            margin-left: 20px;
            overflow: visible;
            list-style-type: disc;
        }

        .site-dir li a {
            display: block;
        }

        .site-dir li a:active {
            color: #01AAED;
        }

        .site-dir li a.layui-this {
            color: #01AAED;
        }

        body .layui-layer-dir {
            box-shadow: none;
            border: 1px solid #d2d2d2;
            opacity: 0.2
        }

        body .layui-layer-dir:hover {
            opacity: 1
        }

        body .layui-layer-dir .layui-layer-content {
            padding: 10px;
        }

        .site-dir a em {
            padding-left: 5px;
            font-size: 12px;
            color: #c2c2c2;
            font-style: normal;
        }

        .layui-menu li, .layui-menu-body-title a {
            padding: 0px;
        }

        @media screen and (max-width: 992px) {
            .layui-layer-dir {
                display: none;
            }
        }
        .layui-layer-dir .layui-layer-max{
            display: none;
        }
    </style>
    <div>

        <ul id="dianti" class="layui-menu site-dir layui-layer-wrap">
            <li th:each="card:${form.cards}"
                th:if="${not #lists.isEmpty(form.cards) and not #strings.isEmpty(card.cardname)}">
                <a th:href="${'#'+card.cardname}"><cite th:text="${card.cardname}">水平导航</cite></a>
            </li>
        </ul>
    </div>
</div>
</body>

<input type="hidden" id='validateRules' name='validateRules' th:value="${form.core.validaterules}">
<input type="hidden" id='validateMessages' name='validateMessages' th:value="${form.core.validatemessages}">
<input type="hidden" id='formSubmitUrl' name='formSubmitUrl' th:value="${formSubmitUrl}">
<input type="hidden" id='formUrl' name='formUrl' th:value="${formUrl}">
<input type="hidden" id='contextName' name='contextName' th:value="${contextName}">
<input type="hidden" id='uploadUrl' name='uploadUrl' th:value="${uploadUrl}">
<input type="hidden" id='downloadUrl' name='downloadUrl' th:value="${downloadUrl}">
<input type="hidden" id='holiday' name='holiday' th:value="${holiday}">

<script th:src="${contextName+'/webjars/topezadmin/layui/js/ezform.js?v='+vi}" type="text/javascript"></script>

<script>

    layui.use("layer", function () {
        if ($("#dianti").length > 0 && $("#dianti").children().length > 1) {
            layer.open({
                title: '目录'
                , skin: 'layui-layer-dir'
                , type: 1
                , offset: 'r'
                , shade: 0
                ,moveOut:true
                ,resize : false
                , fixed: true
                , minStack:true
                , maxmin:true
                , closeBtn:0
                , content: $("#dianti")
            });

        }
    })
    var validateRules=[(${#strings.isEmpty(form.core.validaterules)?"[]":form.core.validaterules})];
    var validateMessages=[(${#strings.isEmpty(form.core.validatemessages)?"[]":form.core.validatemessages})];

</script>


[(${form.core.append_foot})]
</html>